;duty squad
; если отказались помогать, то сначала неписи бегут сюда
[logic@ros_smart_terrain_1_1_reject_path_01]
active = walker@ros_smart_terrain_1_1_reject_path_01
suitable = {=check_npc_name(ros_duty_tech) +ros_capture_base_quest_reject -ros_smart_terrain_1_1_zombies_dead} true, {=surge_started} true, false
prior = 200

[walker@ros_smart_terrain_1_1_reject_path_01]
path_walk = surge_1_walk
path_look = surge_1_look
meet = no_meet
def_state_moving = assault
use_camp = false
turn_on_campfire = false
; combat_ignore_keep_when_attacked = true
gather_items_enabled = false
; help_wounded_enabled = false
corpse_detection_enabled = false
; invulnerable = {!actor_enemy} true, false

[logic@ros_smart_terrain_1_1_reject_path_02]
active = walker@ros_smart_terrain_1_1_reject_path_02
suitable = {=check_npc_name(ros_duty_squad_04) +ros_capture_base_quest_reject -ros_smart_terrain_1_1_zombies_dead} true, {=surge_started} true, false
prior = 200

[walker@ros_smart_terrain_1_1_reject_path_02]
path_walk = surge_2_walk
path_look = surge_2_look
meet = no_meet
def_state_moving = assault
use_camp = false
turn_on_campfire = false
; combat_ignore_keep_when_attacked = true
gather_items_enabled = false
; help_wounded_enabled = false
corpse_detection_enabled = false
; invulnerable = {!actor_enemy} true, false

[logic@ros_smart_terrain_1_1_reject_path_03]
active = walker@ros_smart_terrain_1_1_reject_path_03
suitable = {=check_npc_name(ros_duty_trader) +ros_capture_base_quest_reject -ros_smart_terrain_1_1_zombies_dead} true, {=surge_started} true, false
prior = 200

[walker@ros_smart_terrain_1_1_reject_path_03]
path_walk = surge_3_walk
path_look = surge_3_look
meet = no_meet
def_state_moving = assault
use_camp = false
turn_on_campfire = false
; combat_ignore_keep_when_attacked = true
gather_items_enabled = false
; help_wounded_enabled = false
corpse_detection_enabled = false
; invulnerable = {!actor_enemy} true, false

[logic@ros_smart_terrain_1_1_reject_path_04]
active = walker@ros_smart_terrain_1_1_reject_path_04
suitable = {=check_npc_name(ros_duty_medic) +ros_capture_base_quest_reject -ros_smart_terrain_1_1_zombies_dead} true, {=surge_started} true, false
prior = 200

[walker@ros_smart_terrain_1_1_reject_path_04]
path_walk = surge_4_walk
path_look = surge_4_look
meet = no_meet
def_state_moving = assault
use_camp = false
turn_on_campfire = false
; combat_ignore_keep_when_attacked = true
gather_items_enabled = false
; help_wounded_enabled = false
corpse_detection_enabled = false
; invulnerable = {!actor_enemy} true, false

[logic@ros_smart_terrain_1_1_reject_path_05]
active = walker@ros_smart_terrain_1_1_reject_path_05
suitable = {=check_npc_name(ros_general_tachenko) +ros_capture_base_quest_reject -ros_smart_terrain_1_1_zombies_dead} true, {=surge_started} true, false
prior = 200

[walker@ros_smart_terrain_1_1_reject_path_05]
path_walk = surge_5_walk
path_look = surge_5_look
meet = no_meet
def_state_moving = assault
use_camp = false
turn_on_campfire = false
; combat_ignore_keep_when_attacked = true
gather_items_enabled = false
; help_wounded_enabled = false
corpse_detection_enabled = false
; invulnerable = {!actor_enemy} true, false

;
[logic@ros_smart_terrain_1_1_leader]
active = walker@ros_smart_terrain_1_1_leader
suitable = {=check_npc_name(ros_general_tachenko)} true
prior = 199
level_spot = quest_npc

[walker@ros_smart_terrain_1_1_leader]
path_walk = leader_walk
path_look = leader_look
meet = meet@ros_smart_terrain_1_1_leader
def_state_moving = rush
use_camp = false
turn_on_campfire = false
combat_ignore_cond = {=actor_enemy =check_enemy_name(actor) -ros_smart_terrain_1_1_zombies_dead} false, true
; combat_ignore_keep_when_attacked = true
gather_items_enabled = false
; help_wounded_enabled = false
corpse_detection_enabled = false
invulnerable = {!actor_enemy} true, false
trade_enable = false

[meet@ros_smart_terrain_1_1_leader]
close_anim 		= ward
close_victim 	= actor
far_anim 		= ward
far_victim 		= nil
close_snd_hello = {=actor_enemy} nil, {=actor_has_weapon} meet_hide_weapon, meet_hello
; close_distance  = 3
; far_distance 	= 5
use = {=actor_enemy} false, {=actor_has_weapon} false, true
meet_on_talking = false
allow_break = false
meet_dialog = {+ros_smart_terrain_1_1_zombies_dead -ros_capture_base_quest_reject} ros_general_tachenko_dialog_2, {+ros_general_tachenko_dialog_1} nil, ros_general_tachenko_dialog_1

;camping
[logic@ros_smart_terrain_1_1_camp_work_1]
active = animpoint@ros_smart_terrain_1_1_camp_work_1
suitable = {!surge_started} true
prior = 25

[animpoint@ros_smart_terrain_1_1_camp_work_1]
cover_name = ros_smart_terrain_1_1_animpoint_kamp1
use_camp = true
turn_on_campfire = true

[logic@ros_smart_terrain_1_1_camp_work_2]
active = animpoint@ros_smart_terrain_1_1_camp_work_2
suitable = {!surge_started} true
prior = 25

[animpoint@ros_smart_terrain_1_1_camp_work_2]
cover_name = ros_smart_terrain_1_1_animpoint_kamp2
use_camp = true
turn_on_campfire = true

[logic@ros_smart_terrain_1_1_camp_work_3]
active = animpoint@ros_smart_terrain_1_1_camp_work_3
suitable = {!surge_started} true
prior = 25

[animpoint@ros_smart_terrain_1_1_camp_work_3]
cover_name = ros_smart_terrain_1_1_animpoint_kamp3
use_camp = true
turn_on_campfire = true

[logic@ros_smart_terrain_1_1_camp_work_4]
active = animpoint@ros_smart_terrain_1_1_camp_work_4
suitable = {!surge_started} true
prior = 25

[animpoint@ros_smart_terrain_1_1_camp_work_4]
cover_name = ros_smart_terrain_1_1_animpoint_kamp4
use_camp = true
turn_on_campfire = true

;inside
[logic@ros_smart_terrain_1_1_camp_work_5]
active = animpoint@ros_smart_terrain_1_1_camp_work_5
suitable = {!check_npc_name(zombied)} true
prior = 25

[animpoint@ros_smart_terrain_1_1_camp_work_5]
cover_name = ros_smart_terrain_1_1_animpoint_kamp5
use_camp = true
turn_on_campfire = true

[logic@ros_smart_terrain_1_1_camp_work_6]
active = animpoint@ros_smart_terrain_1_1_camp_work_6
suitable = {=check_npc_name(ros_duty_tech)} true
prior = 199
can_select_weapon = true
level_spot = mechanic
dont_keep_items = true

[animpoint@ros_smart_terrain_1_1_camp_work_6]
cover_name = ros_smart_terrain_1_1_animpoint_kamp6
meet = meet@ros_smart_terrain_1_1_camp_work_6
def_state_moving = rush
use_camp = false
turn_on_campfire = false
combat_ignore_cond = {=actor_enemy =check_enemy_name(actor) -ros_smart_terrain_1_1_zombies_dead} false, true
; combat_ignore_keep_when_attacked = true
gather_items_enabled = false
; help_wounded_enabled = false
corpse_detection_enabled = false
invulnerable = {!actor_enemy} true, false

[meet@ros_smart_terrain_1_1_camp_work_6]
close_anim 		= animpoint_sit_normal
close_victim 	= nil
far_anim 		= animpoint_sit_normal
far_victim 		= nil
close_distance  = 0
far_distance 	= 0
use = {=actor_enemy} false, true
meet_on_talking = false
allow_break = false

[logic@ros_smart_terrain_1_1_camp_work_7]
active = animpoint@ros_smart_terrain_1_1_camp_work_7
suitable = {=check_npc_name(ros_duty_squad_04)} true
prior = 199

[animpoint@ros_smart_terrain_1_1_camp_work_7]
cover_name = ros_smart_terrain_1_1_animpoint_kamp7
meet = meet@ros_smart_terrain_1_1_camp_work_7
def_state_moving = rush
use_camp = false
turn_on_campfire = false
combat_ignore_cond = {=actor_enemy =check_enemy_name(actor) -ros_smart_terrain_1_1_zombies_dead} false, true
; combat_ignore_keep_when_attacked = true
gather_items_enabled = false
; help_wounded_enabled = false
corpse_detection_enabled = false
invulnerable = {!actor_enemy} true, false
trade_enable = false

[meet@ros_smart_terrain_1_1_camp_work_7]
close_anim 		= animpoint_sit_normal
close_victim 	= nil
far_anim 		= animpoint_sit_normal
far_victim 		= nil
close_distance  = 0
far_distance 	= 0
use = {=actor_enemy} false, true
meet_on_talking = false
allow_break = false

[logic@ros_smart_terrain_1_1_camp_work_8]
active = animpoint@ros_smart_terrain_1_1_camp_work_8
suitable = {!check_npc_name(zombied)} true
prior = 25

[animpoint@ros_smart_terrain_1_1_camp_work_8]
cover_name = ros_smart_terrain_1_1_animpoint_kamp8
use_camp = true
turn_on_campfire = true

[logic@ros_smart_terrain_1_1_camp_work_9]
active = animpoint@ros_smart_terrain_1_1_camp_work_9
suitable = {!check_npc_name(zombied)} true
prior = 25

[animpoint@ros_smart_terrain_1_1_camp_work_9]
cover_name = ros_smart_terrain_1_1_animpoint_kamp9
use_camp = true
turn_on_campfire = true

[logic@ros_smart_terrain_1_1_camp_work_10]
active = animpoint@ros_smart_terrain_1_1_camp_work_10
suitable = {!check_npc_name(zombied)} true
prior = 25

[animpoint@ros_smart_terrain_1_1_camp_work_10]
cover_name = ros_smart_terrain_1_1_animpoint_kamp10
use_camp = true
turn_on_campfire = true

[logic@ros_smart_terrain_1_1_camp_work_11]
active = animpoint@ros_smart_terrain_1_1_camp_work_11
suitable = {!check_npc_name(zombied)} true
prior = 25

[animpoint@ros_smart_terrain_1_1_camp_work_11]
cover_name = ros_smart_terrain_1_1_animpoint_kamp11
use_camp = true
turn_on_campfire = true

[logic@ros_smart_terrain_1_1_camp_work_12]
active = animpoint@ros_smart_terrain_1_1_camp_work_12
suitable = {=check_npc_name(ros_duty_medic)} true
prior = 199
trade = misc\trade\trade_medic.ltx
level_spot = medic

[animpoint@ros_smart_terrain_1_1_camp_work_12]
cover_name = ros_smart_terrain_1_1_animpoint_kamp12
meet = meet@ros_smart_terrain_1_1_camp_work_12
def_state_moving = rush
use_camp = false
turn_on_campfire = false
combat_ignore_cond = {=actor_enemy =check_enemy_name(actor) -ros_smart_terrain_1_1_zombies_dead} false, true
; combat_ignore_keep_when_attacked = true
gather_items_enabled = false
; help_wounded_enabled = false
corpse_detection_enabled = false
invulnerable = {!actor_enemy} true, false
trade = false

[meet@ros_smart_terrain_1_1_camp_work_12]
close_anim 		= animpoint_sit_normal
close_victim 	= nil
far_anim 		= animpoint_sit_normal
far_victim 		= nil
close_distance  = 0
far_distance 	= 0
use = {=actor_enemy} false, true
meet_on_talking = false
allow_break = false

[logic@ros_smart_terrain_1_1_camp_work_13]
active = animpoint@ros_smart_terrain_1_1_camp_work_13
suitable = {!check_npc_name(zombied)} true
prior = 25

[animpoint@ros_smart_terrain_1_1_camp_work_13]
cover_name = ros_smart_terrain_1_1_animpoint_kamp13
use_camp = true
turn_on_campfire = true

[logic@ros_smart_terrain_1_1_camp_work_14]
active = animpoint@ros_smart_terrain_1_1_camp_work_14
suitable = {!check_npc_name(zombied)} true
prior = 25

[animpoint@ros_smart_terrain_1_1_camp_work_14]
cover_name = ros_smart_terrain_1_1_animpoint_kamp14
use_camp = true
turn_on_campfire = true

[logic@ros_smart_terrain_1_1_camp_work_15]
active = animpoint@ros_smart_terrain_1_1_camp_work_15
suitable = {=check_npc_name(ros_duty_trader)} true
prior = 199
trade = misc\trade\trade_duty.ltx
can_select_weapon = true
level_spot = trader
dont_keep_items = true

[animpoint@ros_smart_terrain_1_1_camp_work_15]
cover_name = ros_smart_terrain_1_1_animpoint_kamp15
meet = meet@ros_smart_terrain_1_1_camp_work_15
def_state_moving = rush
use_camp = false
turn_on_campfire = false
combat_ignore_cond = {=actor_enemy =check_enemy_name(actor) -ros_smart_terrain_1_1_zombies_dead} false, true
; combat_ignore_keep_when_attacked = true
gather_items_enabled = false
; help_wounded_enabled = false
corpse_detection_enabled = false
invulnerable = {!actor_enemy} true, false

[meet@ros_smart_terrain_1_1_camp_work_15]
close_anim 		= animpoint_sit_normal
close_victim 	= nil
far_anim 		= animpoint_sit_normal
far_victim 		= nil
close_distance  = 0
far_distance 	= 0
use = {=actor_enemy} false, true
meet_on_talking = false
allow_break = false

;------------------------------
;------- Mutant swarm ----------
;------------------------------

[logic@faction_base_defense_enemy1]
active = mob_home@faction_base_defense_enemy1
suitable = {=target_squad_name(faction_base_defense_flesh_squad)} true
monster_job = true
prior = 200

[mob_home@faction_base_defense_enemy1]
path_home = home_attackers
home_min_radius = 1
home_max_radius = 2
aggressive = true
panic = 0
on_timer = 5000 | %=hit_npc_from_actor +mar_smart_terrain_5_12_mutants_to_base%

[logic@faction_base_defense_enemy2]
active = mob_home@faction_base_defense_enemy2
suitable = {=target_squad_name(faction_base_defense_boar_squad)} true
monster_job = true
prior = 200

[mob_home@faction_base_defense_enemy2]
path_home = home_attackers
home_min_radius = 1
home_max_radius = 2
aggressive = true
panic = 0
on_timer = 5000 | %=hit_npc_from_actor +mar_smart_terrain_5_12_mutants_to_base%

[logic@faction_base_defense_enemy3]
active = mob_home@faction_base_defense_enemy3
suitable = {=target_squad_name(faction_base_defense_dog_squad)} true
monster_job = true
prior = 200

[mob_home@faction_base_defense_enemy3]
path_home = home_attackers
home_min_radius = 1
home_max_radius = 2
aggressive = true
panic = 0
on_timer = 5000 | %=hit_npc_from_actor +mar_smart_terrain_5_12_mutants_to_base%